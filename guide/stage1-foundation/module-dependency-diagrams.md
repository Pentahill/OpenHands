# OpenHands Ê®°Âùó‰æùËµñÂõæËØ¶Ëß£

## üéØ Ê¶ÇËø∞

Êú¨ÊñáÊ°£Êèê‰æõ‰∫ÜOpenHandsÈ°πÁõÆ‰∏≠Agent-Action-ObservationÊ®°ÂºèÁõ∏ÂÖ≥Ê®°ÂùóÁöÑËØ¶ÁªÜ‰æùËµñÂÖ≥Á≥ªÂõæÔºåÊåâÁÖß‰∏çÂêåÁöÑÂ∫îÁî®Âú∫ÊôØËøõË°åÂàÜÁ±ªÔºåÂ∏ÆÂä©ÂºÄÂèëËÄÖÈÄêÊ≠•ÁêÜËß£ÂíåÂ≠¶‰π†Á≥ªÁªüÊû∂ÊûÑ„ÄÇ

## üìä Êï¥‰ΩìÊû∂ÊûÑ‰æùËµñÂõæ

```mermaid
graph TB
    subgraph "Áî®Êà∑Êé•Âè£Â±Ç"
        UI[Web UI]
        CLI[CLI Interface]
        API[REST API]
    end
    
    subgraph "ÊéßÂà∂Â±Ç"
        AC[AgentController]
        SM[Session Manager]
        CM[Conversation Manager]
    end
    
    subgraph "AgentÂ±Ç"
        AB[Agent Base]
        CA[CodeAct Agent]
        BA[Browsing Agent]
        RA[ReadOnly Agent]
    end
    
    subgraph "‰∫ã‰ª∂Á≥ªÁªü"
        ES[Event Stream]
        EF[Event Filter]
        ESS[Event Store]
    end
    
    subgraph "ActionÁ≥ªÁªü"
        AA[Action Base]
        CRA[CmdRun Action]
        FEA[FileEdit Action]
        BUA[BrowseURL Action]
        IPA[IPython Action]
    end
    
    subgraph "ObservationÁ≥ªÁªü"
        OB[Observation Base]
        COO[CmdOutput Obs]
        FRO[FileRead Obs]
        BOO[BrowserOutput Obs]
        IPO[IPython Obs]
    end
    
    subgraph "RuntimeÂ±Ç"
        RB[Runtime Base]
        DR[Docker Runtime]
        LR[Local Runtime]
        RR[Remote Runtime]
    end
    
    subgraph "LLMÂ±Ç"
        LLM[LLM Interface]
        LC[LLM Config]
        LM[LLM Metrics]
    end
    
    subgraph "Â≠òÂÇ®Â±Ç"
        FS[File Store]
        MS[Memory Store]
        CS[Config Store]
    end
    
    UI --> AC
    CLI --> AC
    API --> AC
    AC --> SM
    AC --> AB
    AB --> CA
    AB --> BA
    AB --> RA
    AC --> ES
    ES --> EF
    ES --> ESS
    AB --> AA
    AA --> CRA
    AA --> FEA
    AA --> BUA
    AA --> IPA
    RB --> OB
    OB --> COO
    OB --> FRO
    OB --> BOO
    OB --> IPO
    AC --> RB
    RB --> DR
    RB --> LR
    RB --> RR
    AB --> LLM
    LLM --> LC
    LLM --> LM
    AC --> FS
    AC --> MS
    AC --> CS
    
    style UI fill:#e3f2fd
    style AA fill:#fff3e0
    style OB fill:#f3e5f5
    style RB fill:#e8f5e8
    style LLM fill:#fce4ec
```

## üîç Âú∫ÊôØ1ÔºöÂëΩ‰ª§ÊâßË°åÂú∫ÊôØ

### Ê®°Âùó‰æùËµñÂÖ≥Á≥ª

```mermaid
graph TD
    subgraph "AgentÂÜ≥Á≠ñÂ±Ç"
        A1[CodeActAgent.step]
        A2[LLM.acompletion]
        A3[ActionParser.parse]
    end
    
    subgraph "ActionÂ±Ç"
        B1[CmdRunAction]
        B2[ActionConfirmationStatus]
        B3[ActionSecurityRisk]
    end
    
    subgraph "ÊéßÂà∂Âô®Â±Ç"
        C1[AgentController._run_action]
        C2[EventStream.add_event]
        C3[StateTracker.update]
    end
    
    subgraph "RuntimeÊâßË°åÂ±Ç"
        D1[Runtime.run_command]
        D2[BashUtils.execute]
        D3[CommandResult]
    end
    
    subgraph "ObservationÂ±Ç"
        E1[CmdOutputObservation]
        E2[CmdOutputMetadata]
        E3[PS1Parser]
    end
    
    subgraph "ÁéØÂ¢ÉÂ±Ç"
        F1[Docker Container]
        F2[Bash Shell]
        F3[File System]
    end
    
    A1 --> A2
    A2 --> A3
    A3 --> B1
    B1 --> C1
    C1 --> C2
    C1 --> D1
    D1 --> D2
    D2 --> F2
    F2 --> F1
    F1 --> F3
    D2 --> D3
    D3 --> E1
    E1 --> E2
    E2 --> E3
    E1 --> C2
    C2 --> C3
    
    style A1 fill:#e1f5fe
    style B1 fill:#fff3e0
    style E1 fill:#f3e5f5
    style D1 fill:#e8f5e8
```

### ÂÖ≥ÈîÆ‰ª£Á†ÅÊñá‰ª∂

```python
# 1. AgentÂÜ≥Á≠ñ - openhands/agenthub/codeact_agent/codeact_agent.py
class CodeActAgent(Agent):
    async def step(self, state: State) -> Action:
        messages = self._get_messages(state)
        response = await self.llm.acompletion(messages=messages)
        action = self._parse_response(response)
        return action

# 2. ActionÂÆö‰πâ - openhands/events/action/commands.py
@dataclass
class CmdRunAction(Action):
    command: str
    is_input: bool = False
    thought: str = ''
    blocking: bool = False
    runnable: ClassVar[bool] = True

# 3. RuntimeÊâßË°å - openhands/runtime/base.py
class Runtime:
    async def run_command(self, action: CmdRunAction) -> CmdOutputObservation:
        result = await self._execute_bash_command(action.command)
        return CmdOutputObservation(
            content=result.stdout,
            command=action.command,
            metadata=CmdOutputMetadata(exit_code=result.exit_code)
        )

# 4. ObservationÂ§ÑÁêÜ - openhands/events/observation/commands.py
@dataclass
class CmdOutputObservation(Observation):
    command: str
    metadata: CmdOutputMetadata
    
    @property
    def success(self) -> bool:
        return self.metadata.exit_code == 0
```

## üîç Âú∫ÊôØ2ÔºöÊñá‰ª∂Êìç‰ΩúÂú∫ÊôØ

### Ê®°Âùó‰æùËµñÂÖ≥Á≥ª

```mermaid
graph TD
    subgraph "AgentÂÜ≥Á≠ñÂ±Ç"
        A1[Agent.analyze_file_need]
        A2[FileActionPlanner]
        A3[PathValidator]
    end
    
    subgraph "ActionÂ±Ç"
        B1[FileReadAction]
        B2[FileEditAction]
        B3[FileWriteAction]
        B4[FileEditSource]
    end
    
    subgraph "ÊéßÂà∂Âô®Â±Ç"
        C1[AgentController.handle_file_action]
        C2[SecurityAnalyzer.check_path]
        C3[EventStream.add_event]
    end
    
    subgraph "RuntimeÊñá‰ª∂Â±Ç"
        D1[Runtime.read_file]
        D2[Runtime.edit_file]
        D3[FileEditRuntimeMixin]
        D4[FileUtils]
    end
    
    subgraph "ObservationÂ±Ç"
        E1[FileReadObservation]
        E2[FileEditObservation]
        E3[FileWriteObservation]
        E4[ErrorObservation]
    end
    
    subgraph "Â≠òÂÇ®Â±Ç"
        F1[FileStore]
        F2[Local FileSystem]
        F3[Container FileSystem]
    end
    
    A1 --> A2
    A2 --> A3
    A3 --> B1
    A3 --> B2
    A3 --> B3
    B1 --> C1
    B2 --> C1
    B3 --> C1
    C1 --> C2
    C2 --> D1
    C2 --> D2
    D1 --> D3
    D2 --> D3
    D3 --> D4
    D4 --> F1
    F1 --> F2
    F1 --> F3
    D1 --> E1
    D2 --> E2
    D4 --> E3
    D4 --> E4
    E1 --> C3
    E2 --> C3
    E3 --> C3
    E4 --> C3
    
    style A1 fill:#e1f5fe
    style B1 fill:#fff3e0
    style E1 fill:#f3e5f5
    style D1 fill:#e8f5e8
```

### ÂÖ≥ÈîÆ‰ª£Á†ÅÊñá‰ª∂

```python
# 1. Êñá‰ª∂ActionÂÆö‰πâ - openhands/events/action/files.py
@dataclass
class FileReadAction(Action):
    path: str
    start: int = 1
    end: int = -1
    thought: str = ''

@dataclass
class FileEditAction(Action):
    path: str
    file_text: str
    start: int = 1
    end: int = -1
    thought: str = ''

# 2. Êñá‰ª∂RuntimeÂ§ÑÁêÜ - openhands/runtime/utils/files.py
class FileUtils:
    @staticmethod
    async def read_file(path: str, start: int = 1, end: int = -1) -> str:
        with open(path, 'r', encoding='utf-8') as f:
            lines = f.readlines()
            if end == -1:
                return ''.join(lines[start-1:])
            return ''.join(lines[start-1:end])

# 3. Êñá‰ª∂ÁºñËæëMixin - openhands/runtime/utils/edit.py
class FileEditRuntimeMixin:
    async def edit_file(self, action: FileEditAction) -> FileEditObservation:
        try:
            # ÊâßË°åÊñá‰ª∂ÁºñËæëÈÄªËæë
            result = await self._perform_file_edit(action)
            return FileEditObservation(
                path=action.path,
                content=result.content,
                success=True
            )
        except Exception as e:
            return ErrorObservation(content=str(e))

# 4. Êñá‰ª∂Observation - openhands/events/observation/files.py
@dataclass
class FileReadObservation(Observation):
    path: str
    content: str
    
    @property
    def message(self) -> str:
        return f'Read {len(self.content)} characters from {self.path}'
```

## üîç Âú∫ÊôØ3ÔºöÊµèËßàÂô®‰∫§‰∫íÂú∫ÊôØ

### Ê®°Âùó‰æùËµñÂÖ≥Á≥ª

```mermaid
graph TD
    subgraph "AgentÂÜ≥Á≠ñÂ±Ç"
        A1[BrowsingAgent.step]
        A2[BrowserActionPlanner]
        A3[URLValidator]
    end
    
    subgraph "ActionÂ±Ç"
        B1[BrowseURLAction]
        B2[BrowseInteractiveAction]
        B3[BrowserActionType]
    end
    
    subgraph "ÊéßÂà∂Âô®Â±Ç"
        C1[AgentController.handle_browse]
        C2[SecurityAnalyzer.check_url]
        C3[EventStream.add_event]
    end
    
    subgraph "RuntimeÊµèËßàÂô®Â±Ç"
        D1[Runtime.browse_url]
        D2[BrowserUtils]
        D3[PlaywrightManager]
        D4[ScreenshotCapture]
    end
    
    subgraph "ObservationÂ±Ç"
        E1[BrowserOutputObservation]
        E2[ScreenshotData]
        E3[PageContent]
        E4[ErrorObservation]
    end
    
    subgraph "ÊµèËßàÂô®Â±Ç"
        F1[Playwright Browser]
        F2[Chrome/Firefox]
        F3[DOM Parser]
        F4[Screenshot Engine]
    end
    
    A1 --> A2
    A2 --> A3
    A3 --> B1
    A3 --> B2
    B1 --> C1
    B2 --> C1
    C1 --> C2
    C2 --> D1
    D1 --> D2
    D2 --> D3
    D3 --> D4
    D4 --> F1
    F1 --> F2
    F2 --> F3
    F2 --> F4
    D1 --> E1
    D2 --> E2
    D3 --> E3
    D4 --> E4
    E1 --> C3
    E2 --> C3
    E3 --> C3
    E4 --> C3
    
    style A1 fill:#e1f5fe
    style B1 fill:#fff3e0
    style E1 fill:#f3e5f5
    style D1 fill:#e8f5e8
```

### ÂÖ≥ÈîÆ‰ª£Á†ÅÊñá‰ª∂

```python
# 1. ÊµèËßàÂô®Action - openhands/events/action/browse.py
@dataclass
class BrowseURLAction(Action):
    url: str
    thought: str = ''
    
    @property
    def message(self) -> str:
        return f'Browsing URL: {self.url}'

@dataclass
class BrowseInteractiveAction(Action):
    browser_actions: str
    thought: str = ''

# 2. ÊµèËßàÂô®Runtime - openhands/runtime/browser/utils.py
class BrowserUtils:
    @staticmethod
    async def browse_url(url: str) -> BrowserOutputObservation:
        async with playwright.async_playwright() as p:
            browser = await p.chromium.launch()
            page = await browser.new_page()
            await page.goto(url)
            
            content = await page.content()
            screenshot = await page.screenshot()
            
            return BrowserOutputObservation(
                url=url,
                content=content,
                screenshot=base64.b64encode(screenshot).decode()
            )

# 3. ÊµèËßàÂô®Observation - openhands/events/observation/browse.py
@dataclass
class BrowserOutputObservation(Observation):
    url: str
    screenshot: str | None = None
    error: bool = False
    
    @property
    def message(self) -> str:
        return f'Browsed {self.url}'

# 4. ÊµèËßàÂô®Agent - openhands/agenthub/browsing_agent/browsing_agent.py
class BrowsingAgent(Agent):
    async def step(self, state: State) -> Action:
        # ÂàÜÊûêÂΩìÂâçÈ°µÈù¢Áä∂ÊÄÅ
        current_url = self._get_current_url(state)
        
        # ÂÜ≥ÂÆö‰∏ã‰∏ÄÊ≠•ÊµèËßàË°åÂä®
        if self._need_navigate():
            return BrowseURLAction(url=self._get_target_url())
        else:
            return BrowseInteractiveAction(
                browser_actions=self._get_interaction_commands()
            )
```

## üîç Âú∫ÊôØ4ÔºöPython‰ª£Á†ÅÊâßË°åÂú∫ÊôØ

### Ê®°Âùó‰æùËµñÂÖ≥Á≥ª

```mermaid
graph TD
    subgraph "AgentÂÜ≥Á≠ñÂ±Ç"
        A1[CodeActAgent.generate_code]
        A2[CodeAnalyzer]
        A3[SafetyChecker]
    end
    
    subgraph "ActionÂ±Ç"
        B1[IPythonRunCellAction]
        B2[CodeValidation]
        B3[KernelConfig]
    end
    
    subgraph "ÊéßÂà∂Âô®Â±Ç"
        C1[AgentController.handle_ipython]
        C2[SecurityAnalyzer.check_code]
        C3[EventStream.add_event]
    end
    
    subgraph "Runtime JupyterÂ±Ç"
        D1[Runtime.run_ipython]
        D2[JupyterManager]
        D3[KernelManager]
        D4[CodeExecutor]
    end
    
    subgraph "ObservationÂ±Ç"
        E1[IPythonRunCellObservation]
        E2[ExecutionResult]
        E3[ImageCapture]
        E4[ErrorObservation]
    end
    
    subgraph "JupyterÂ±Ç"
        F1[Jupyter Kernel]
        F2[IPython Engine]
        F3[Matplotlib Backend]
        F4[Output Capture]
    end
    
    A1 --> A2
    A2 --> A3
    A3 --> B1
    B1 --> C1
    C1 --> C2
    C2 --> D1
    D1 --> D2
    D2 --> D3
    D3 --> D4
    D4 --> F1
    F1 --> F2
    F2 --> F3
    F2 --> F4
    D1 --> E1
    D2 --> E2
    D3 --> E3
    D4 --> E4
    E1 --> C3
    E2 --> C3
    E3 --> C3
    E4 --> C3
    
    style A1 fill:#e1f5fe
    style B1 fill:#fff3e0
    style E1 fill:#f3e5f5
    style D1 fill:#e8f5e8
```

### ÂÖ≥ÈîÆ‰ª£Á†ÅÊñá‰ª∂

```python
# 1. IPython Action - openhands/events/action/commands.py
@dataclass
class IPythonRunCellAction(Action):
    code: str
    thought: str = ''
    include_extra: bool = True
    kernel_init_code: str = ''
    
    @property
    def message(self) -> str:
        return f'Running Python code: {self.code[:50]}...'

# 2. Jupyter Runtime - openhands/runtime/plugins/jupyter/__init__.py
class JupyterRequirement(PluginRequirement):
    name: str = 'jupyter'
    
    async def initialize(self, runtime: Runtime):
        # ÂàùÂßãÂåñJupyterÂÜÖÊ†∏
        await self._setup_kernel(runtime)
        await self._configure_matplotlib(runtime)

# 3. IPython Observation - openhands/events/observation/commands.py
@dataclass
class IPythonRunCellObservation(Observation):
    code: str
    image_urls: list[str] | None = None
    
    @property
    def success(self) -> bool:
        return True  # IPythonÊÄªÊòØÊàêÂäüÊâßË°å
    
    def __str__(self) -> str:
        result = f'**IPythonRunCellObservation**\n{self.content}'
        if self.image_urls:
            result += f'\nImages: {len(self.image_urls)}'
        return result

# 4. ‰ª£Á†ÅÊâßË°åÂ∑•ÂÖ∑ - openhands/runtime/utils/ipython.py
class IPythonUtils:
    @staticmethod
    async def execute_code(code: str, kernel_id: str) -> dict:
        # Âú®JupyterÂÜÖÊ†∏‰∏≠ÊâßË°å‰ª£Á†Å
        result = await kernel_manager.execute(
            code=code,
            kernel_id=kernel_id,
            capture_output=True
        )
        
        return {
            'stdout': result.stdout,
            'stderr': result.stderr,
            'display_data': result.display_data,
            'images': result.images
        }
```

## üîç Âú∫ÊôØ5ÔºöAgentÁä∂ÊÄÅÁÆ°ÁêÜÂú∫ÊôØ

### Ê®°Âùó‰æùËµñÂÖ≥Á≥ª

```mermaid
graph TD
    subgraph "AgentÊéßÂà∂Â±Ç"
        A1[AgentController.state_machine]
        A2[StateTracker]
        A3[AgentState]
    end
    
    subgraph "ActionÂ±Ç"
        B1[ChangeAgentStateAction]
        B2[AgentFinishAction]
        B3[AgentDelegateAction]
        B4[AgentRejectAction]
    end
    
    subgraph "Áä∂ÊÄÅÁÆ°ÁêÜÂ±Ç"
        C1[State.update]
        C2[StateValidator]
        C3[TransitionManager]
    end
    
    subgraph "‰∫ã‰ª∂Â§ÑÁêÜÂ±Ç"
        D1[EventStream.process]
        D2[EventFilter]
        D3[EventStore]
    end
    
    subgraph "ObservationÂ±Ç"
        E1[AgentStateChangedObservation]
        E2[AgentDelegateObservation]
        E3[SuccessObservation]
        E4[ErrorObservation]
    end
    
    subgraph "ÊåÅ‰πÖÂåñÂ±Ç"
        F1[StateStore]
        F2[ConversationStore]
        F3[MemoryStore]
    end
    
    A1 --> A2
    A2 --> A3
    A3 --> B1
    A3 --> B2
    A3 --> B3
    A3 --> B4
    B1 --> C1
    B2 --> C1
    B3 --> C1
    B4 --> C1
    C1 --> C2
    C2 --> C3
    C3 --> D1
    D1 --> D2
    D2 --> D3
    C1 --> E1
    C2 --> E2
    C3 --> E3
    D1 --> E4
    E1 --> F1
    E2 --> F2
    E3 --> F3
    E4 --> F1
    
    style A1 fill:#e1f5fe
    style B1 fill:#fff3e0
    style E1 fill:#f3e5f5
    style C1 fill:#e8f5e8
```

### ÂÖ≥ÈîÆ‰ª£Á†ÅÊñá‰ª∂

```python
# 1. AgentÁä∂ÊÄÅAction - openhands/events/action/agent.py
@dataclass
class ChangeAgentStateAction(Action):
    agent_state: AgentState
    thought: str = ''

@dataclass
class AgentFinishAction(Action):
    outputs: dict[str, Any] = field(default_factory=dict)
    thought: str = ''

# 2. Áä∂ÊÄÅÁÆ°ÁêÜ - openhands/controller/state/state.py
@dataclass
class State:
    agent_state: AgentState = AgentState.INIT
    max_iterations: int = 100
    iteration: int = 0
    
    def update_agent_state(self, new_state: AgentState):
        self.agent_state = new_state
        self.last_updated = datetime.now()

# 3. Áä∂ÊÄÅËøΩË∏™ - openhands/controller/state/state_tracker.py
class StateTracker:
    def __init__(self, state: State):
        self.state = state
        self.history: list[AgentState] = []
    
    def transition_to(self, new_state: AgentState) -> bool:
        if self._is_valid_transition(self.state.agent_state, new_state):
            self.history.append(self.state.agent_state)
            self.state.update_agent_state(new_state)
            return True
        return False

# 4. AgentÁä∂ÊÄÅObservation - openhands/events/observation/agent.py
@dataclass
class AgentStateChangedObservation(Observation):
    agent_state: AgentState
    
    @property
    def message(self) -> str:
        return f'Agent state changed to {self.agent_state}'
```

## üìã ÂÆåÊï¥Ê®°ÂùóÊ∏ÖÂçï

### Ê†∏ÂøÉ‰∫ã‰ª∂Ê®°Âùó

| Ê®°ÂùóË∑ØÂæÑ | ‰∏ªË¶ÅÁ±ª | ÂäüËÉΩÊèèËø∞ | ‰æùËµñÂÖ≥Á≥ª |
|---------|--------|----------|----------|
| `openhands.events.event` | `Event`, `EventSource` | ‰∫ã‰ª∂Âü∫Á±ªÂíåÊù•Ê∫êÂÆö‰πâ | Êó†‰æùËµñ |
| `openhands.events.stream` | `EventStream` | ‰∫ã‰ª∂ÊµÅÁÆ°ÁêÜ | ‰æùËµñ `Event` |
| `openhands.events.event_store` | `EventStore` | ‰∫ã‰ª∂ÊåÅ‰πÖÂåñ | ‰æùËµñ `Event`, `EventStream` |

### ActionÊ®°ÂùóÂ±ÇÊ¨°

| Â±ÇÁ∫ß | Ê®°ÂùóË∑ØÂæÑ | ‰∏ªË¶ÅÁ±ª | ÂäüËÉΩÊèèËø∞ |
|------|---------|--------|----------|
| Âü∫Á°ÄÂ±Ç | `openhands.events.action.action` | `Action` | ActionÂü∫Á±ª |
| ÂëΩ‰ª§Â±Ç | `openhands.events.action.commands` | `CmdRunAction`, `IPythonRunCellAction` | ÂëΩ‰ª§ÊâßË°å |
| Êñá‰ª∂Â±Ç | `openhands.events.action.files` | `FileReadAction`, `FileEditAction` | Êñá‰ª∂Êìç‰Ωú |
| ÊµèËßàÂô®Â±Ç | `openhands.events.action.browse` | `BrowseURLAction`, `BrowseInteractiveAction` | ÊµèËßàÂô®‰∫§‰∫í |
| Ê∂àÊÅØÂ±Ç | `openhands.events.action.message` | `MessageAction`, `SystemMessageAction` | Ê∂àÊÅØÂ§ÑÁêÜ |
| AgentÂ±Ç | `openhands.events.action.agent` | `AgentFinishAction`, `AgentDelegateAction` | AgentÊéßÂà∂ |

### ObservationÊ®°ÂùóÂ±ÇÊ¨°

| Â±ÇÁ∫ß | Ê®°ÂùóË∑ØÂæÑ | ‰∏ªË¶ÅÁ±ª | ÂäüËÉΩÊèèËø∞ |
|------|---------|--------|----------|
| Âü∫Á°ÄÂ±Ç | `openhands.events.observation.observation` | `Observation` | ObservationÂü∫Á±ª |
| ÂëΩ‰ª§Â±Ç | `openhands.events.observation.commands` | `CmdOutputObservation`, `IPythonRunCellObservation` | ÂëΩ‰ª§ÁªìÊûú |
| Êñá‰ª∂Â±Ç | `openhands.events.observation.files` | `FileReadObservation`, `FileEditObservation` | Êñá‰ª∂Êìç‰ΩúÁªìÊûú |
| ÊµèËßàÂô®Â±Ç | `openhands.events.observation.browse` | `BrowserOutputObservation` | ÊµèËßàÂô®ÁªìÊûú |
| ÈîôËØØÂ±Ç | `openhands.events.observation.error` | `ErrorObservation` | ÈîôËØØ‰ø°ÊÅØ |
| AgentÂ±Ç | `openhands.events.observation.agent` | `AgentStateChangedObservation` | AgentÁä∂ÊÄÅ |

### ÊéßÂà∂Âô®Ê®°ÂùóÂ±ÇÊ¨°

| Â±ÇÁ∫ß | Ê®°ÂùóË∑ØÂæÑ | ‰∏ªË¶ÅÁ±ª | ÂäüËÉΩÊèèËø∞ |
|------|---------|--------|----------|
| Ê†∏ÂøÉÂ±Ç | `openhands.controller.agent_controller` | `AgentController` | ‰∏ªÊéßÂà∂Âô® |
| AgentÂ±Ç | `openhands.controller.agent` | `Agent` | AgentÂü∫Á±ª |
| Áä∂ÊÄÅÂ±Ç | `openhands.controller.state.state` | `State` | Áä∂ÊÄÅÁÆ°ÁêÜ |
| ËøΩË∏™Â±Ç | `openhands.controller.state.state_tracker` | `StateTracker` | Áä∂ÊÄÅËøΩË∏™ |

### RuntimeÊ®°ÂùóÂ±ÇÊ¨°

| Â±ÇÁ∫ß | Ê®°ÂùóË∑ØÂæÑ | ‰∏ªË¶ÅÁ±ª | ÂäüËÉΩÊèèËø∞ |
|------|---------|--------|----------|
| Âü∫Á°ÄÂ±Ç | `openhands.runtime.base` | `Runtime` | RuntimeÂü∫Á±ª |
| ÂÆûÁé∞Â±Ç | `openhands.runtime.impl.docker.docker_runtime` | `DockerRuntime` | DockerÂÆûÁé∞ |
| ÂÆûÁé∞Â±Ç | `openhands.runtime.impl.local.local_runtime` | `LocalRuntime` | Êú¨Âú∞ÂÆûÁé∞ |
| Â∑•ÂÖ∑Â±Ç | `openhands.runtime.utils.bash` | `BashUtils` | BashÂ∑•ÂÖ∑ |
| Â∑•ÂÖ∑Â±Ç | `openhands.runtime.utils.files` | `FileUtils` | Êñá‰ª∂Â∑•ÂÖ∑ |

## üéØ Â≠¶‰π†Ë∑ØÂæÑÂª∫ËÆÆ

### Á¨¨‰∏ÄÈò∂ÊÆµÔºöÁêÜËß£Âü∫Á°ÄÊ¶ÇÂøµ
1. ‰ªé `Event` Âü∫Á±ªÂºÄÂßãÔºåÁêÜËß£‰∫ã‰ª∂Á≥ªÁªüÁöÑÂü∫Á°Ä
2. Â≠¶‰π† `Action` Âíå `Observation` ÁöÑÂü∫Êú¨ÁªìÊûÑ
3. ÁêÜËß£ `EventStream` ÁöÑÂ∑•‰ΩúÂéüÁêÜ

### Á¨¨‰∫åÈò∂ÊÆµÔºöÊéåÊè°ÁÆÄÂçïÂú∫ÊôØ
1. Ê∑±ÂÖ•Â≠¶‰π†ÂëΩ‰ª§ÊâßË°åÂú∫ÊôØÁöÑÂÆåÊï¥ÊµÅÁ®ã
2. ÁêÜËß£ `CmdRunAction` ‚Üí `Runtime` ‚Üí `CmdOutputObservation` ÁöÑÊµÅÁ®ã
3. ÂÆûË∑µ‰ª£Á†ÅËøΩË∏™ÂíåË∞ÉËØï

### Á¨¨‰∏âÈò∂ÊÆµÔºöÊâ©Â±ïÂà∞Â§çÊùÇÂú∫ÊôØ
1. Â≠¶‰π†Êñá‰ª∂Êìç‰ΩúÂú∫ÊôØÁöÑÂÆûÁé∞
2. ÁêÜËß£ÊµèËßàÂô®‰∫§‰∫íÁöÑÂ§çÊùÇÊÄß
3. ÊéåÊè°Python‰ª£Á†ÅÊâßË°åÁöÑÊú∫Âà∂

### Á¨¨ÂõõÈò∂ÊÆµÔºöÊ∑±ÂÖ•Á≥ªÁªüÊû∂ÊûÑ
1. ÁêÜËß£AgentÁä∂ÊÄÅÁÆ°ÁêÜ
2. Â≠¶‰π†‰∫ã‰ª∂ÊµÅÁöÑÈ´òÁ∫ßÁâπÊÄß
3. ÊéåÊè°RuntimeÁöÑÊâ©Â±ïÊú∫Âà∂

### Á¨¨‰∫îÈò∂ÊÆµÔºöÂÆûË∑µÂíåÊâ©Â±ï
1. ÂÆûÁé∞Ëá™ÂÆö‰πâÁöÑActionÂíåObservation
2. ÂºÄÂèë‰∏ìÁî®ÁöÑAgent
3. Êâ©Â±ïRuntimeÂäüËÉΩ

## üîó Áõ∏ÂÖ≥ËµÑÊ∫ê

- [Agent-Action-ObservationÊ®°ÂºèËØ¶Ëß£](./agent-action-observation-pattern.md)
- [OpenHandsÊû∂ÊûÑÊ¶ÇËßà](../README.md)
- [Ê∑±ÂÖ•ÁêÜËß£ÊåáÂçó](../stage2-deep-dive/README.md)
- [Êâ©Â±ïÂºÄÂèëÊåáÂçó](../stage4-extension/README.md)